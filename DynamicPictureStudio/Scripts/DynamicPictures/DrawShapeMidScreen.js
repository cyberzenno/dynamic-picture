/// <reference path="../Generators/ShapeGenerator.js" />
/// <reference path="../DynamicPictureCanvas.js" />
/// <reference path="../Generators/NumberGenerator.js" />
/// <reference path="../../Scripts Ext Libraries/TinyColor_1_4_1.js" />
/// <reference path="../../ScriptsExtLibs/FabricJs_1_7_0.js" />
/// <reference path="../Generators/NumberGenerator.js" />
function DrawShapeMidScreen(canvasId) {

    this.MainCanvas = new DynamicPictureCanvas(canvasId);

    var w = this.MainCanvas.Canvas.width;
    var h = this.MainCanvas.Canvas.height;

    fabric.Object.prototype.objectCaching = false;

    var canvas = new fabric.StaticCanvas(canvasId, { renderOnAddRemove: false, stateful: false });

    var svgUrl = "http://localhost:56345/Content/svg/iphone.svg";
    fabric.loadSVGFromURL(svgUrl, function (objects, options) {

        var shape = objects[0];

        var hAdjust = shape.getBoundingRectHeight() / 2;
        var wAdjust = shape.getBoundingRectWidth() / 2;

        shape.top = (h / 2) - hAdjust;
        shape.left = (w / 2) - wAdjust;

        canvas.add(shape).renderAll();

    })



    //var shapePath = "";
    //var shape = new fabric.Path(shapePath);

    //shape.set({
    //    top: top,
    //    left: left,
    //    width: 1000,
    //    height: 1000,
    //    fill: color1

    //});
    ////shape.setShadow({ color: color1, blur: 100 })

    ////var s = NumberGenerator.Generate(0, 20) / 100;

    ////shape.scale(s);
    //canvas.add(shape);

}

function flakeScatter(settings) {

    var canvas = new fabric.StaticCanvas(settings.cId, { renderOnAddRemove: false, stateful: false });

    var mw = settings.mw;
    var mh = settings.mh;

    var rect = new fabric.Rect({
        left: 0,
        top: 0,
        width: mw,
        height: mh
    });

    var c1 = ColorGenerator.GenerateFromPalette(PaletteFactory.Blue).ToRgbFunctionString();
    var c2 = ColorGenerator.GenerateFromPalette(PaletteFactory.LightBlue).ToRgbFunctionString();
    rect.setGradient('fill', {
        x1: 0,
        y1: rect.height,
        x2: rect.width,
        y2: rect.height,
        colorStops: {
            0: c1,
            1: c2
        }
    });
    canvas.add(rect);


    var flakePath = "m 838.85542,724.45037 c -8.33791,-17.74181 -24.18828,-30.79104 -41.88947,-38.58808 -10.3575,-4.5613 -21.44338,-7.49998 -32.68868,-8.75676 -8.82562,-0.98796 -20.26478,1.24737 -23.81625,-9.34148 l -0.0314,-0.0941 c -6.05873,-24.22585 -28.47123,-42.31781 -50.64933,-51.23714 l -26.36102,-10.64507 c -0.0314,0 -0.0314,0 -0.0314,0 -8.1065,-3.2795 -7.98149,-12.0645 -0.65012,-16.30372 l 24.47593,-14.14031 c 1.20675,-0.71285 2.72295,-0.83472 4.05478,-0.28153 l 113.52266,45.73164 7.76575,-19.24554 -83.51003,-33.66416 c -7.73453,-3.12627 -9.00378,-11.47979 -1.42249,-15.90354 l 31.28189,-18.07008 c 1.23796,-0.71285 2.75423,-0.80343 4.05164,-0.28153 l 52.10628,20.97755 7.76575,-19.24554 -47.98893,-19.33941 c -1.98202,-0.77559 -3.15755,-2.84803 -2.87618,-4.94894 l 7.24057,-51.24019 -20.54616,-2.87626 -7.85641,55.60144 c -0.18429,1.42249 -1.0223,2.66052 -2.2572,3.37329 l -31.31309,18.10138 c -7.39685,4.20801 -14.26539,-0.65012 -13.05864,-9.18824 l 12.59282,-89.17174 -20.54616,-2.90747 -17.11028,121.22584 c -0.21566,1.42248 -1.05045,2.66044 -2.28849,3.37329 l -24.47585,14.13717 c -7.14678,4.05486 -14.94374,0.2188 -13.83078,-8.50981 l 0.0314,-0.2188 3.99236,-28.18682 c 2.69173,-19.18304 0.55679,-39.26643 -9.25082,-56.22042 l -0.0314,0 c -2.72302,-4.76449 -5.75558,-8.78806 -8.78805,-12.15821 l -0.0314,0 c -0.30976,-0.37172 -0.65011,-0.74422 -0.99101,-1.08489 l -0.0627,-0.0941 c -3.83598,-4.27051 -4.32988,-9.56341 -1.60999,-14.603 l 0.0314,0 c 17.3417,-28.87772 21.65598,-70.20757 1.64136,-98.91959 l -2.78561,-3.99227 -4.85828,-0.39995 c -20.24282,-1.8727 -39.86047,5.99625 -55.5983,18.32644 -8.17841,6.40577 -15.43771,13.95273 -21.81541,22.1436 -5.48353,7.03738 -9.93536,18.59535 -20.82432,16.36944 l -0.12547,-0.0314 c -0.49406,-0.12547 -0.98787,-0.21879 -1.4537,-0.34113 -4.42688,-0.92545 -9.40711,-1.54757 -14.88123,-1.54757 l -0.0314,0 -0.0627,0 c -19.58636,0 -38.02533,8.20029 -53.2786,20.11155 l -22.40317,17.54176 c -6.59029,6.59029 -14.41855,-0.0941 -14.47791,-7.57817 l 0,-28.28062 c 0,-1.42563 0.68148,-2.75432 1.79443,-3.65154 l 96.41238,-75.43161 -12.80856,-16.33501 -70.9172,55.50765 c -6.6528,5.16781 -14.38726,1.95081 -14.47799,-6.74659 l 0,-36.13702 c 0,-1.42555 0.68148,-2.78553 1.79451,-3.65154 l 44.24673,-34.62076 -12.81161,-16.33806 -40.74836,31.86958 c -1.67257,1.32869 -4.02356,1.32869 -5.693,0 l -40.74836,-31.86958 -12.80848,16.33806 44.24352,34.62076 c 1.1161,0.86601 1.79452,2.22905 1.79452,3.65154 l 0,36.13702 c -0.0314,8.75684 -7.92205,11.82061 -14.48105,6.74659 l 0,-0.0314 -70.91729,-55.47643 -12.80848,16.335 96.40917,75.43162 c 1.11609,0.89722 1.79451,2.22905 1.79451,3.65153 l 0,28.28062 c -0.0392,8.1159 -7.78136,12.70528 -14.48105,7.57817 l -22.40321,-17.5417 c -15.25326,-11.91432 -33.69538,-20.11155 -53.28173,-20.11155 l -0.0314,0 -0.0627,0 c -5.47726,0 -10.45749,0.61875 -14.84995,1.54757 l -0.0314,0 c -0.46268,0.12469 -0.95972,0.2188 -1.45369,0.34113 l -0.0941,0.0314 c -10.31374,1.93826 -14.13404,-7.46257 -19.3144,-14.35291 -6.27441,-8.34724 -13.43679,-16.07551 -21.52148,-22.70015 -16.14429,-13.22741 -36.28705,-21.66531 -57.43031,-19.78642 l 0.0314,-0.0314 -5.13652,0.52543 -2.96997,4.17672 c -11.40788,16.39751 -14.64049,36.99362 -12.29263,56.5425 1.20047,9.9948 3.80469,19.82076 7.61252,29.13721 3.50151,8.56918 12.81475,19.03608 4.86769,27.80853 l -0.0627,0.0941 c -17.51047,18.71722 -22.52512,44.67805 -18.99553,69.49159 l 4.02051,28.18691 0,0.15605 c 1.17545,8.75363 -6.71224,12.62404 -13.79965,8.57232 l -24.50401,-14.10902 c -1.20674,-0.71285 -2.07275,-1.95081 -2.26034,-3.342 l -17.26351,-121.19463 -20.546083,2.90747 12.71468,89.16868 c 1.14425,8.38473 -5.6617,13.39931 -13.08671,9.16009 l -31.31004,-18.03887 c -1.23796,-0.71285 -2.07581,-1.95081 -2.2572,-3.33887 l -7.92205,-55.63273 -20.54608,2.93876 7.27178,51.20584 c 0.30976,2.10405 -0.86601,4.17673 -2.84497,4.94894 l -47.95764,19.40191 7.76576,19.24554 52.07499,-21.07134 c 1.33183,-0.52543 2.84497,-0.39995 4.05171,0.3129 l 31.3131,18.03879 c 7.55009,4.36125 6.46521,12.65532 -1.36304,15.90048 l -0.0314,0 -83.47874,33.72659 7.7970401,19.24561 113.4913829,-45.88488 c 1.30054,-0.52542 2.81368,-0.39994 4.05163,0.31291 l 24.47593,14.10909 c 7.27178,4.20802 7.48752,13.05543 -0.65011,16.30372 l -26.39231,10.67636 c -17.945083,7.27178 -34.251863,19.15175 -44.027863,36.14009 l 0,0.0314 c -2.75432,4.76135 -4.95208,9.83851 -6.55901,15.12826 l -0.0314,0.0941 c -1.79451,5.50541 -6.09318,8.50981 -11.82052,8.69426 l 0,-0.0314 c -33.51094,0 -71.65822,16.36622 -86.48009,48.11393 l -2.04146,4.39246 2.04146,4.42375 c 8.56612,18.1576 24.96363,31.39128 43.2118901,39.07892 9.1882399,3.87347 18.9204899,6.28696 28.7870699,7.6344 9.16008,1.2505 22.77207,-1.21608 26.42674,9.87607 l 0.0314,0.12469 c 7.48752,24.53843 27.41462,41.83316 50.680583,51.17769 l 26.39232,10.64201 c 8.13778,3.27951 7.98149,12.06756 0.68148,16.30686 l -24.47585,14.17152 c -1.23804,0.71285 -2.72303,0.80351 -4.05172,0.28153 l -113.5538829,-45.70043 -7.7657501,19.27683 83.57253,33.60159 c 7.46877,3.02008 8.57859,11.72995 1.3912,15.90361 l -31.28188,18.1013 c -1.23796,0.71285 -2.72303,0.80656 -4.05478,0.28153 l -52.10315,-20.97756 -7.73446,19.27683 47.98885,19.30812 c 1.9821,0.77559 3.15756,2.84803 2.87932,4.94894 l -7.20928,51.23714 20.54616,2.87621 7.82826,-55.62963 c 0.18429,-1.39433 1.0223,-2.66044 2.2572,-3.37329 l 31.28188,-18.10129 c 7.42501,-4.20802 14.26226,0.6156 13.08672,9.15694 l 0,0.0314 -12.53338,89.17177 20.546163,2.8761 17.04778,-121.22579 c 0.18429,-1.4224 1.01916,-2.66358 2.2572,-3.37329 l 24.47272,-14.14031 c 7.27185,-4.17672 15.00639,-0.0941 13.79964,8.69434 l 0,0.0314 -3.96106,28.18996 c -3.54841,24.83855 1.78824,50.66811 19.12054,69.46038 5.14279,5.16781 3.24194,11.45791 0.31917,17.22911 -4.96462,9.8041 -8.73182,20.246 -10.99522,31.0036 -4.66764,22.2125 -2.5323,46.3539 10.73573,65.3493 l 2.78552,3.9923 4.85828,0.4031 c 34.99286,3.0012 67.85353,-21.8748 84.74807,-50.8683 l 0.0627,-0.094 c 3.00127,-4.8864 7.82826,-7.0842 13.42754,-5.9087 l 0.0627,0 c 0.52543,0.1255 1.0223,0.2188 1.48499,0.3411 l 0.0314,0 c 4.39246,0.9285 9.37582,1.5475 14.81873,1.5475 l 0.0314,0 0.0627,0 c 19.61757,0 38.05655,-8.2003 53.2786,-20.1428 l 22.40305,-17.5418 c 6.62151,-6.6216 14.41855,0.031 14.48105,7.55 l 0.0314,28.2807 c 0,1.4256 -0.65011,2.7855 -1.79451,3.6484 l -96.34667,75.5003 12.80856,16.3382 70.88592,-55.5389 c 6.6528,-5.1991 14.38734,-1.979 14.48113,6.7465 l 0,36.1058 c 0,1.4256 -0.65011,2.7856 -1.76331,3.6828 l -44.21537,34.6239 12.78033,16.3381 40.74836,-31.9009 c 1.66944,-1.3318 4.02043,-1.3318 5.72429,0 l 40.75142,31.8696 12.77726,-16.3662 -44.24665,-34.5927 c -1.14425,-0.8659 -1.79138,-2.2259 -1.79138,-3.6515 l -0.0314,-36.1057 c 0,-8.7881 7.95334,-11.9144 14.48105,-6.7748 l 70.94544,55.4765 12.78032,-16.3663 -96.44358,-75.4035 c -1.1161,-0.866 -1.76323,-2.229 -1.76323,-3.6515 l -0.0314,-28.2181 c 0,-8.9412 7.30307,-12.4083 14.48113,-7.6125 l 22.40309,17.5136 c 19.67388,15.3751 44.81569,24.0225 69.67925,18.1919 l 0.12548,0 c 5.63042,-1.1755 10.45748,1.0223 13.45875,5.9087 l 0.0314,0.094 c 17.14463,29.2686 49.55201,53.6069 84.83864,50.7745 l 4.82707,-0.4031 2.78239,-3.9891 c 11.35792,-16.31 14.61241,-36.631 12.252,-56.0923 -1.21921,-10.0667 -3.86099,-19.9553 -7.61565,-29.3686 -3.44835,-8.6474 -12.62717,-19.3018 -4.7583,-28.06179 l 0.0627,-0.0941 c 0.34113,-0.37172 0.68148,-0.74422 0.99101,-1.08166 l 0.0314,0 c 16.73825,-18.68907 21.44338,-44.09037 18.0075,-68.38185 l -3.98913,-28.18683 0,-0.0314 c -1.20675,-8.81934 6.6215,-12.81161 13.79956,-8.69426 l 0,-0.0314 24.47272,14.14031 c 1.23804,0.71285 2.07275,1.95081 2.29163,3.3733 l 17.16965,121.19458 20.54615,-2.9075 -12.62403,-89.17175 c -1.20675,-8.38481 5.63042,-13.39624 13.05857,-9.15694 l 31.31003,18.03879 c 1.23795,0.71285 2.07275,1.95081 2.2572,3.37329 l 7.89075,55.62961 20.54616,-2.93877 -7.27178,-51.20585 c -0.27839,-2.10397 0.89722,-4.17672 2.87619,-4.95207 l 47.98884,-19.36749 -7.76575,-19.24562 -52.10307,21.00885 c -1.33183,0.55679 -2.81681,0.43445 -4.05485,-0.28153 l -31.31309,-18.0388 c -7.5188,-4.39559 -6.434,-12.71782 1.42554,-15.90353 l 83.47882,-33.72666 -7.76583,-19.24554 -113.52258,45.82544 c -1.30054,0.52542 -2.81682,0.43445 -4.05486,-0.28154 l -24.47585,-14.14031 c -7.29993,-4.23616 -7.45622,-13.05543 0.68148,-16.30685 l 26.36103,-10.64194 c 17.97629,-7.27177 34.28314,-19.12053 44.05914,-36.13703 l 0.0314,0 c 2.69801,-4.72386 5.11778,-9.85411 6.52771,-15.13132 l 0.0314,-0.0941 c 1.73507,-5.32411 6.31206,-8.51295 11.85182,-8.69426 33.69232,0 71.51439,-16.17558 86.51129,-48.05143 l 2.04155,-4.39246 -2.05088,-4.40187 m -448.82583,-62.06973 -8.38481,20.94627 c -0.77558,1.91959 -2.07267,3.68282 -3.77653,4.85828 -0.46269,0.37171 -0.9598,0.71285 -1.51628,0.89729 -1.88831,0.86601 -3.92977,1.0223 -5.94308,0.77559 l -0.0627,0 -22.33746,-3.18571 c -2.0446,-0.3129 -3.62024,-1.91952 -3.92977,-3.92977 l -6.62151,-45.8848 c -0.43132,-2.87626 -0.0627,-5.87753 1.76323,-8.22852 0.80342,-1.95081 2.59794,-3.00126 4.67069,-2.78553 3.03256,-0.52542 5.90874,0.68149 8.25973,2.53545 l 36.41841,28.65265 c 1.61312,1.26619 2.20089,3.43266 1.45997,5.34912 m -36.10888,66.3403 0,0.25016 0,0.0314 0,0.0627 0,0.0314 c 0,2.31971 -0.92851,4.61134 -2.38228,6.40272 l -13.92458,17.76052 c -1.26932,1.61007 -3.46395,2.19784 -5.38354,1.42249 l -43.03992,-17.20094 c -3.43266,-1.36312 -6.6528,-4.20801 -6.83725,-8.13778 l 0,-0.52543 c 0.18429,-3.96106 3.3733,-6.7778 6.83725,-8.16907 l 43.00869,-17.26344 c 1.91639,-0.77559 4.08293,-0.18743 5.35226,1.42248 l 13.98394,17.72927 c 1.39433,1.72887 2.32284,3.92663 2.38542,6.18697 m 24.04132,-237.13384 c 6.34327,-2.26034 12.12692,0.46582 12.15821,7.73454 l 0,30.60032 c -0.047,7.58131 -7.60632,10.78263 -13.42754,6.25262 l -26.20786,-20.51487 c -5.63042,-4.42689 -4.76449,-12.28643 2.19783,-14.82187 l 25.27936,-9.25074 m -99.5668,-20.23349 c 3.47336,-10.03543 5.32724,-20.68057 4.67697,-31.31623 -0.40936,-6.66535 -0.99415,-14.54363 7.20308,-16.33501 l 0.15606,-0.0314 c 17.86681,-3.39212 35.68053,3.73591 49.66141,14.57484 l 0.12548,0.0627 27.72414,21.72161 c 4.7957,3.77348 5.16773,11.23284 -1.23804,13.5807 l -0.0314,0 -33.75474,12.34579 c -16.42567,5.95877 -36.06512,7.72513 -51.82491,-1.20675 l -0.0941,0 c -4.96767,-2.75423 -4.0892,-8.84741 -2.60421,-13.36809 m -11.38914,48.63912 0.0627,-0.25017 c 1.17554,-3.74532 3.21701,-7.36243 6.62159,-9.50082 l 0.30976,-0.18743 c 3.58904,-1.88831 7.92213,-2.01339 11.81747,-1.11296 l 0.21566,0.0627 c 8.17527,2.35413 15.21578,7.65949 22.19677,12.31145 8.69121,5.78992 17.76683,11.03584 26.62679,16.56 17.68872,11.02965 36.39034,20.97136 53.0973,33.47344 1.32869,0.86601 2.16654,2.351 2.16654,3.92977 l 0,30.2283 c -0.0392,6.63405 -6.42772,11.73308 -12.40829,7.33122 l -69.62605,-50.93388 c -6.18078,-4.52374 -6.99676,-3.62652 -6.21513,3.93291 l 9.38202,85.43268 c 0.8035,7.48759 -6.55901,10.48878 -12.56146,7.08741 l -26.20786,-15.10011 c -1.35999,-0.77559 -2.22599,-2.22591 -2.31978,-3.80469 0,-20.0303 -1.66003,-40.02304 -2.38221,-60.0346 -0.37485,-10.32621 -0.72226,-20.65242 -0.97227,-30.98482 -0.22507,-9.29772 -2.05087,-19.29565 0.19684,-28.44633 M 185.04685,393.79905 c 0.28467,-7.13737 1.07234,-26.70185 11.74556,-25.66072 11.50167,1.11609 22.86586,6.95911 31.94776,13.83391 19.95839,15.11572 35.05842,40.34504 33.59531,65.9464 -0.48151,8.41602 -2.86677,26.92063 -14.24343,26.83939 -11.61115,-0.0941 -23.06278,-5.08029 -32.11347,-12.11445 -20.4711,-15.9004 -31.93529,-43.18374 -30.93173,-68.84453 m -6.83724,118.2277 c 1.17546,-11.26405 5.28967,-22.12485 12.6834,-30.75348 l 0.12547,-0.15605 c 4.61133,-5.01458 10.11675,-3.34201 14.94374,0.0941 l 0.0314,0 c 9.52897,6.77474 20.54302,11.44858 32.08531,13.39625 l 0.15605,0.0314 c 4.58005,0.89722 9.99481,3.00126 10.21054,8.47546 l 0.0314,0 0,0.31291 c 0,0.0314 0.0314,0.0314 0.0314,0.0627 l -0.0314,0.0941 0,0.0627 c -0.50974,18.34519 -11.16712,34.05173 -24.84788,45.51285 l -27.50527,23.11281 -0.0314,0 c -5.28975,4.48625 -11.50794,0.3129 -12.40837,-5.69299 l -4.94894,-34.87092 0,-0.0941 -0.0314,-0.0627 c -0.84726,-6.47776 -1.15365,-13.01802 -0.49405,-19.52386 m 28.46507,93.37669 c -6.18698,-3.62024 -5.75558,-10.08546 -0.61875,-14.41541 l 0,0.0314 20.63681,-17.32602 c 5.66179,-4.73328 12.83977,-1.70073 13.92458,5.5367 l 4.67069,32.92003 c 1.08175,7.61259 -5.23031,12.37708 -12.09563,8.50981 l -26.51739,-15.2564 m 14.88123,47.99198 -0.0314,0 -30.84728,12.46774 c -6.57469,2.66986 -13.11487,-2.00084 -11.72681,-9.28203 l 4.61133,-26.51418 c 1.17546,-6.71224 6.43706,-10.24182 12.74598,-6.68408 l 26.51731,15.25326 c 6.77475,3.92978 5.81495,11.84876 -1.26924,14.75929 m -140.596543,18.74851 0.0627,-0.15606 c 6.08385,-17.26352 20.883763,-28.99653 37.378203,-35.76813 l 0.12547,-0.0314 0.0314,-0.0314 32.645,-13.18059 c 5.66179,-2.29155 12.2833,1.05045 11.17034,7.85954 l 0,0.0314 -6.18697,35.3961 c -1.51628,8.81935 -4.27052,17.51361 -8.72563,25.27936 l 0,0 c -4.4581,7.6751 -10.61378,14.32789 -18.16388,18.99859 l -0.0941,0.0627 c -4.7801,2.86685 -9.7197,-0.8722 -12.87098,-4.39246 -4.47692,-5.10209 -9.21953,-9.75091 -14.78117,-13.68382 -7.049853,-4.98336 -24.194563,-8.72555 -20.589923,-20.41174 m -40.49827,88.43089 -0.0314,0 c -11.46732,-1.11923 -22.83771,-4.28933 -33.0451099,-9.68221 -7.14363997,-3.77662 -26.2797801,-14.8156 -21.4371101,-25.1324 4.5300101,-9.65092 18.3357801,-16.81957 27.61467,-20.80251 12.50523,-5.36787 26.3204,-7.94707 39.92298,-7.22175 12.51463,0.66894 25.10745,4.24236 35.50557,11.38286 5.28027,3.62346 9.54459,8.09403 13.530673,13.07112 4.18299,5.22097 4.14543,8.25345 0.30976,13.64947 -14.027703,19.71457 -39.113273,26.94259 -62.369913,24.73542 m 110.952883,74.93764 -0.0314,-0.0314 -32.64187,-13.11801 -0.0941,-0.0314 -0.0627,-0.0314 C 102.03085,815.52712 87.240267,803.86594 81.112667,786.56808 l -0.0627,-0.18743 c -2.74804,-8.91941 6.25575,-11.9769 12.41143,-15.3189 8.688073,-4.71454 16.516323,-11.0422 22.797093,-18.68601 l 0.0941,-0.12547 c 3.15756,-3.58895 7.98149,-7.36243 12.87099,-4.42681 l 0.0941,0.0627 c 15.58154,9.67908 23.89451,26.6737 26.98016,44.27796 l 6.21826,35.3961 c 1.21302,6.7153 -5.40856,10.15117 -11.10156,7.92518 m 1.35999,-95.42122 -0.1843,-0.18742 c -2.62923,-2.8794 -4.76456,-6.46522 -4.9178,-10.48878 l 0,-0.37172 c 0.12548,-3.99235 2.25728,-7.5813 4.9178,-10.48877 l 0.15606,-0.18743 c 6.26203,-5.98692 14.53109,-9.46648 22.18117,-13.27744 9.21011,-4.58632 18.15446,-9.74785 27.2333,-14.58739 18.34832,-9.77914 36.17451,-21.56532 55.50451,-29.31233 1.42249,-0.71285 3.09506,-0.68148 4.48625,0.0941 l 26.17658,15.10011 c 5.94002,3.4358 7.11548,11.29534 0.18743,14.3904 l 0,0.0314 -78.93305,34.89899 c -7.50006,2.99499 -4.97395,4.76449 0,6.95605 l 78.99563,34.78645 c 6.93095,3.06377 5.7555,10.95147 -0.15606,14.38734 l -26.17658,15.15948 c -5.65237,3.21073 -22.33746,-9.11013 -27.56157,-11.87997 -9.51957,-5.05214 -19.03294,-10.11989 -28.55572,-15.16889 -9.18197,-4.86455 -18.24826,-9.98233 -27.50214,-14.70934 -8.80993,-4.50185 -18.5984,-8.20028 -25.85144,-15.14692 m 54.11646,112.87232 26.4861,-15.31577 c 6.5027,-3.69537 13.35869,1.08794 12.13006,8.50981 l -4.64254,32.95132 c -1.02231,7.17798 -8.25973,10.24175 -13.89337,5.5367 l -0.0314,-0.0314 -20.63674,-17.26352 c -4.97395,-4.1361 -5.32097,-10.93892 0.58816,-14.38726 m -10.39812,-17.94814 c -6.34335,3.55774 -11.50802,0.0627 -12.74598,-6.6528 l -4.67383,-26.54868 c -1.25992,-7.15924 5.01144,-11.99878 11.72673,-9.28195 l 30.87864,12.4083 c 6.99354,2.84497 8.1065,10.76701 1.30054,14.72494 l 0,0.0314 -26.4861,15.3189 m -17.44797,91.83226 0.0314,-0.0314 0,-0.0941 4.91765,-34.90213 c 0.83158,-5.97751 7.2906,-9.96665 12.37708,-5.693 l 27.59906,23.05031 c 6.86226,5.72735 13.03049,12.43645 17.51047,20.20534 l 0,0.0314 c 5.07716,8.70053 14.61241,33.34836 -3.00126,34.28314 -12.59275,2.13526 -23.45355,7.6126 -33.87983,14.79058 -4.14551,3.12635 -9.65406,2.56673 -13.1493,-1.23803 -11.5673,-14.60606 -14.8937,-32.10406 -12.40516,-50.40235 m 68.68816,129.73561 c -7.64694,10.642 -17.44169,19.4769 -28.81522,25.9766 -6.59021,3.7672 -22.07176,13.2555 -28.43691,5.0021 -6.29323,-8.1566 -5.6461,-21.0589 -4.84267,-30.7286 1.07547,-12.921 4.48938,-25.5482 10.68577,-36.978 6.37455,-11.7549 15.54091,-22.25926 27.19581,-28.9871 7.09667,-4.09862 19.74572,-10.02923 28.20558,-7.70953 10.20426,2.79807 11.13583,26.57053 10.54814,34.73023 -0.99729,13.934 -6.48082,27.3771 -14.5405,38.6943 m 19.64573,-118.34961 c -2.05401,-8.33784 -0.76932,-17.15718 -0.35055,-25.61069 0.51915,-10.4763 0.55993,-20.98382 0.92538,-31.46633 0.37799,-10.87335 0.75363,-21.74349 1.16926,-32.61371 0.36309,-9.44773 -1.06292,-20.58051 1.19741,-29.77502 0.0941,-1.57564 0.95972,-3.03247 2.31971,-3.83598 l 26.17657,-15.13132 c 6.03382,-3.46395 13.33689,-0.46268 12.56153,7.02483 l 0,0.0314 -9.58528,88.92792 c -0.31604,3.66087 1.39747,4.01416 3.67969,2.34159 l 72.30541,-52.99706 c 6.31198,-4.58004 12.3458,0.52543 12.4083,7.33428 l 0.0314,30.22837 c 0,1.60999 -0.83472,3.06377 -2.16655,3.92977 -17.65115,8.82554 -33.34836,21.13385 -50.02411,31.5882 -8.70368,5.45546 -17.42609,10.87649 -26.19532,16.22867 -8.23785,5.02712 -16.27565,11.89879 -25.66707,14.62495 l -0.24703,0.0627 c -14.6093,2.07589 -18.53907,-10.8921 -18.53907,-10.8921 m 100.71097,59.7188 0,0.0314 -27.72101,21.71844 -0.0941,0.063 -0.0314,0.031 c -11.50794,8.9412 -25.34186,15.4377 -40.16059,15.4377 l -0.0314,0 c -0.0314,0 -0.0314,0 -0.0627,0 l -0.15292,0 c -3.3733,0 -6.46827,-0.3685 -9.21945,-0.866 l -0.18743,-0.031 c -6.7153,-1.4849 -7.95333,-7.178 -7.42501,-12.996 l 0,-0.031 c 0.87848,-8.5505 0.11214,-17.2791 -1.85074,-25.63266 -1.4319,-6.09318 -7.91586,-18.01691 0,-22.35628 l 0.0627,-0.0314 c 16.11927,-8.69427 35.08657,-7.33436 51.85611,-1.23804 l 33.75796,12.31458 c 6.43706,2.35405 6.06503,9.81035 1.26612,13.58689 m 22.15614,-39.26643 c -0.0314,7.20927 -5.84929,9.96351 -12.12692,7.70325 l -0.0314,0 -25.30751,-9.21953 c -6.89974,-2.53846 -7.79696,-10.39487 -2.16646,-14.81862 l 26.17657,-20.51487 c 6.00253,-4.67069 13.3681,-1.85702 13.4306,6.2214 l 0.0314,30.60033 c 0,0 0,0 0,0 m -1.63814,-157.70364 -36.38719,28.65265 c -2.93869,2.2885 -6.96225,3.65154 -10.48878,1.88831 l -0.46269,-0.28153 c -3.342,-2.16655 -4.20801,-6.34327 -3.65153,-10.02609 l 6.55901,-45.85359 c 0.27839,-2.04146 1.8883,-3.65153 3.92977,-3.96106 l 22.30938,-3.21693 c 1.95081,-0.28153 3.83598,-0.0627 5.66171,0.71286 0.40309,0.0941 0.77245,0.25016 1.11304,0.43131 0.0314,0.0314 0.0627,0.0314 0.0933,0.0627 2.04154,1.14738 3.52652,3.12627 4.39253,5.2616 l 8.38473,20.94627 c 0.77245,1.91332 0.18429,4.11108 -1.45369,5.38041 m 261.0438,-178.31235 32.67308,13.18059 0.0314,0 0.0941,0 c 10.82952,4.42681 21.04006,10.86073 28.49636,19.95831 l 0.0314,0 c 3.83598,4.70199 6.89974,10.05738 8.91,15.78167 l 0.0627,0.18743 c 2.5636,8.25345 -5.12397,11.65796 -11.19213,14.70612 -9.2164,4.62694 -17.48546,11.36419 -24.05073,19.29871 l -0.091,0.0941 c -3.15756,3.58903 -7.95334,7.33435 -12.83977,4.42375 l -0.0941,-0.0627 c -15.64405,-9.4008 -23.92252,-26.86124 -26.98009,-44.27791 L 638.528,630.5039 c -1.1786,-6.74345 5.41476,-10.2074 11.13591,-7.91898 M 619.03545,496.56327 c 4.14551,11.01405 4.58004,23.05031 3.00126,34.65204 l 0,0.0627 0,0.0941 -4.95207,34.87083 c -0.86601,5.91815 -7.29366,9.96673 -12.37708,5.693 l -27.56777,-23.05023 c -13.70578,-11.44857 -24.35085,-27.16766 -24.90733,-45.48477 l 0,-0.18743 c -0.0314,-5.72421 5.56799,-7.88762 10.2699,-8.84742 l 0.12548,-0.0314 c 12.59274,-2.13839 23.48484,-7.5813 33.91111,-14.75929 4.14543,-3.15449 9.65406,-2.56673 13.14922,1.23804 l 0.12548,0.12469 c 3.96106,4.61447 7.05612,9.93544 9.22258,15.62844 m -40.96715,141.80014 26.4861,-15.31585 c 6.34327,-3.58581 11.50794,-0.0627 12.74598,6.68409 l 4.67384,26.51426 c 1.23803,7.20927 -5.04273,11.91432 -11.72682,9.28203 l -0.0314,0 -30.84735,-12.43959 c -6.95291,-2.69495 -8.03458,-10.87649 -1.30054,-14.72494 m -10.39498,-17.97629 c -6.86854,3.89848 -13.24309,-0.77559 -12.13006,-8.50981 l 4.64254,-32.95132 c 1.0536,-7.14991 8.29408,-10.24183 13.92458,-5.50863 l 0.0314,0 20.63673,17.26352 c 5.1366,4.33309 5.56799,10.76701 -0.58738,14.38726 l -0.0314,0 -26.48611,15.31898 M 553.44011,401.4548 c 10.19179,-14.18407 24.69786,-25.75765 41.11412,-31.93835 5.87125,-2.2103 13.13047,-4.14864 17.02276,2.16647 4.07987,6.61845 4.24558,15.5784 4.15484,23.10975 -0.44073,36.77475 -24.6603,79.65523 -65.75881,79.86783 l -0.0314,0 c -10.37624,0 -11.608,-27.57404 -11.15473,-34.21437 0.9598,-14.04338 6.52152,-27.59906 14.65303,-38.99133 m -120.39111,58.54021 27.72414,-21.72162 0,0.0314 0.0941,-0.0627 0.0314,-0.0314 c 14.10902,-10.95154 31.65384,-17.94821 49.65828,-14.57492 l 0.18743,0.0314 c 10.86708,2.41663 6.73412,16.28184 7.14049,24.19761 0.35996,6.98421 1.74762,13.87462 3.78595,20.55557 1.56945,5.14899 4.50813,12.80534 -1.64442,16.26302 l -0.12547,0 c -15.73783,8.92247 -35.42418,7.19367 -51.82483,1.20675 l -33.75481,-12.3458 c -6.21199,-2.23532 -6.015,-9.91042 -1.27239,-13.57755 m -22.1843,39.29458 c 0.0314,-7.20927 5.84937,-9.9948 12.15821,-7.70317 l 0,-0.0314 25.31064,9.25074 c 6.65899,2.45106 7.63754,10.51065 2.16655,14.82187 l -26.20786,20.51487 c -6.09318,4.73006 -13.35249,1.56936 -13.42754,-6.2527 l 0,-30.60032 m 0,75.96001 c 0,-1.57877 0.83472,-3.06376 2.16341,-3.92977 5.23031,-5.22717 12.80221,-8.10335 18.99231,-12.02066 9.36336,-5.92747 18.73604,-11.83621 28.1306,-17.71365 9.68214,-6.05256 19.37376,-12.09257 29.13094,-18.02946 8.24405,-5.01466 16.25997,-11.88938 25.667,-14.58426 l 0.24703,-0.0627 c 3.80469,-0.86601 7.98141,-0.92851 11.53915,0.95972 l 0.30976,0.18742 c 3.40459,2.13526 5.44605,5.78679 6.62151,9.52906 l 0.0627,0.2188 c 2.02891,8.26914 0.74108,17.01029 0.34348,25.38883 -0.49405,10.47309 -0.5811,20.97747 -0.94725,31.45692 -0.72853,20.86808 -2.42604,41.72996 -2.42604,62.61686 -0.0627,1.57564 -0.92851,3.03255 -2.31971,3.80476 l -26.17665,15.13132 c -6.03374,3.43266 -13.39625,0.43132 -12.53338,-7.05611 l 0,-0.0314 c 0,0 0,0 0,-0.0314 l 8.98191,-83.00358 c 0.94412,-8.74743 -0.49405,-9.83224 -8.00023,-4.55817 l -67.37828,49.28946 c -6.1807,4.46437 -12.34266,-0.49091 -12.4083,-7.33122 l 0,-30.22829 m 100.92992,145.23602 c 3.46395,1.39119 6.65279,4.20801 6.83724,8.16899 l 0,0.49406 c -0.18429,3.96106 -3.37329,6.77474 -6.83724,8.16907 l -43.0087,17.26344 c -1.91638,0.74108 -4.11422,0.15606 -5.38347,-1.4537 l -13.95586,-17.72934 c -1.42249,-1.79451 -2.38229,-4.05477 -2.38229,-6.37456 l 0,-0.0627 0,-0.0314 0,-0.0627 c 0,-0.0314 0,-0.0314 0,-0.0314 l 0,-0.21879 c 0.0627,-2.26034 0.99109,-4.45504 2.38229,-6.21827 l 13.95586,-17.69805 c 1.26925,-1.63814 3.43266,-2.22591 5.35226,-1.45369 l 43.03991,17.23536 m -99.38235,-63.49228 36.4184,-28.65265 c 2.93876,-2.31971 7.02482,-3.68283 10.55135,-1.85389 l 0.40309,0.25017 c 3.34208,2.16655 4.1768,6.34327 3.64847,10.02609 l -6.59029,45.88488 c -0.2784,2.01017 -1.88831,3.62024 -3.92977,3.92977 l -22.30938,3.21692 -0.0314,0 c -2.31978,0.3129 -4.70199,0.0314 -6.74659,-1.17545 l 0,0.0314 c -0.0314,-0.0314 -0.0314,-0.0314 -0.0627,-0.0314 0,0 0,-0.0314 -0.0314,-0.0314 -2.01025,-1.14417 -3.52653,-3.12313 -4.39246,-5.28968 l -8.38481,-20.94626 c -0.73794,-1.9196 -0.14978,-4.08615 1.45684,-5.3554 m -1.39117,138.52374 8.35352,-20.94627 c 0.83472,-2.16654 2.35099,-4.14551 4.39246,-5.28975 0.0314,-0.0314 0.0314,-0.0314 0.0627,-0.0627 2.01645,-1.15358 4.49872,-1.50059 6.77466,-1.14425 l 22.34067,3.18885 c 2.04147,0.3129 3.6484,1.88831 3.92978,3.92978 l 6.6215,45.88487 c 0.52543,3.68283 -0.34113,7.85955 -3.65153,10.0261 l -0.43446,0.25016 c -3.52652,1.79452 -7.5813,0.43132 -10.48877,-1.82573 l -0.0314,-0.0314 -36.44969,-28.62136 c -1.60693,-1.27246 -2.19462,-3.43893 -1.41935,-5.35539 m 12.15821,170.76225 c -6.34327,2.29155 -12.16135,-0.46269 -12.16135,-7.70325 l -0.0314,-30.56904 c 0,-8.01278 7.45623,-10.92025 13.42746,-6.28076 l 26.20787,20.48358 c 5.63049,4.42374 4.76457,12.252 -2.16647,14.81873 l -25.2763,9.25074 m 99.5668,20.17405 c -3.46081,10.02609 -5.33037,20.69316 -4.67697,31.31626 0.40936,6.656 1.02544,14.5436 -7.17179,16.3318 l -0.15606,0.063 c -5.97123,1.113 -12.13005,1.1443 -18.13258,0.1561 l -0.0314,0 c -11.60173,-1.9195 -22.27495,-7.5188 -31.49754,-14.6968 l -0.0627,-0.031 -0.0941,-0.063 -27.72407,-21.69031 c -4.79578,-3.77662 -5.16781,-11.26413 1.26925,-13.58383 l 33.72354,-12.3458 c 16.93838,-6.22759 35.49303,-7.30934 51.85925,1.14425 l 0.091,0.0627 c 4.96768,2.69488 4.10175,8.8537 2.60421,13.33681 m 11.10776,-48.48596 -0.0627,0.25017 c -1.17546,3.74218 -3.217,7.39372 -6.6215,9.52897 l -0.30977,0.18743 c -3.55774,1.85702 -7.70325,1.82573 -11.54237,0.9598 l -0.24702,-0.0627 c -8.18155,-2.32911 -15.21892,-7.65322 -22.19677,-12.31137 -8.68493,-5.79306 -17.76683,-11.02337 -26.62374,-16.54761 -17.69177,-11.02957 -36.43714,-20.92752 -53.1285,-33.45462 -1.33183,-0.83785 -2.16655,-2.32284 -2.16655,-3.90162 l 0,-30.22837 c 0,-6.8403 6.15882,-11.85182 12.37709,-7.36243 l 72.11149,52.73153 c 2.12898,1.51934 4.24863,0.46269 3.96419,-2.14467 l -9.70722,-88.92173 c -0.80657,-7.51558 6.52771,-10.51998 12.53024,-7.08419 l 26.20786,15.12826 c 1.36312,0.77559 2.2572,2.22905 2.31971,3.80469 0,19.96459 1.63508,39.89796 2.35099,59.84075 0.37172,10.31052 0.69403,20.62426 0.94105,30.93792 0.22821,9.36336 2.05402,19.42693 -0.19683,28.64952 m 78.99257,143.71961 c -8.55052,26.3142 -53.08483,-16.4131 -60.17843,-26.7018 -8.53483,-12.3801 -14.06212,-27.2302 -13.92457,-42.3896 0.091,-10.0323 2.33539,-30.50656 16.36622,-29.24037 l 0.0314,0 c 43.69331,4.09234 70.37328,59.14047 57.70548,98.33177 m 9.80722,-135.64433 c -1.16612,11.23597 -5.31791,22.14368 -12.71469,30.75669 l -0.0941,0.15606 c -8.3129,8.92247 -22.24375,-5.20529 -30.38153,-8.56298 -6.7622,-2.7918 -27.10822,-3.67341 -27.10822,-13.77761 0,0 0,0 0,-0.0314 l 0,-0.0314 c 0,-8.81934 2.99499,-17.82305 7.36243,-25.40122 l 0,-0.0314 c 4.51754,-7.76575 10.64507,-14.48105 17.5136,-20.23663 l 27.53656,-23.08152 c 5.35226,-4.51754 11.51108,-0.3129 12.43959,5.693 l 4.91772,34.87083 0,0 0.0314,0.12548 c 0.90036,6.47148 1.14738,13.03049 0.49719,19.52691 m -28.43377,-93.37975 c 6.18689,3.62025 5.7555,10.05417 0.61874,14.38726 l -20.63681,17.29473 c -5.66171,4.73328 -12.83977,1.70073 -13.92458,-5.5367 l -4.67377,-32.92003 c -1.04418,-7.51253 5.28348,-12.48021 12.127,-8.50981 l 26.48924,15.28455 m -20.69931,-40.31382 c 0,-3.09506 2.04146,-6.1244 5.87744,-7.70631 l 30.84727,-12.43653 c 6.61531,-2.65417 12.81476,2.28536 11.75497,9.28203 l -4.63948,26.54555 c -1.13798,6.39016 -6.74032,10.03228 -12.7459,6.65279 l -26.5174,-15.28455 c -3.09192,-1.79452 -4.5769,-4.45496 -4.5769,-7.05298 m 7.85954,-35.5524 c -7.87837,4.18927 -15.76912,8.35039 -23.67242,12.49276 -4.00796,2.09777 -14.1091,10.21367 -18.90175,7.43434 L 512.62783,781.5745 c -5.94308,-3.43266 -7.11862,-11.32349 -0.15606,-14.41541 l 0,0.0314 77.8139,-34.37694 c 8.85369,-3.91103 8.42849,-4.2455 0.11528,-7.92518 L 512.43998,690.5178 c -6.68401,-2.93562 -5.6305,-11.06713 0.15292,-14.38726 l 26.17665,-15.1314 c 1.36305,-0.80342 3.06377,-0.83471 4.45496,-0.0941 17.36045,10.84206 36.4028,19.03615 54.45414,28.65579 9.01626,4.80519 17.92312,9.89481 27.07693,14.43109 8.07528,4.00169 16.87275,7.61566 23.45049,13.96833 l 0.18429,0.18743 c 2.66053,2.87932 4.76449,6.46835 4.91773,10.48878 l 0,0.33721 c -0.12548,4.02356 -2.2572,7.61259 -4.91773,10.5232 l -0.15605,0.15606 c -8.44732,7.50006 -20.27412,12.66779 -30.17207,17.97943 -12.14574,6.52152 -24.4884,12.6772 -36.68409,19.1174 m 138.61435,9.16008 -0.0627,0.18743 c -6.09632,17.29787 -20.88376,28.99025 -37.40949,35.73684 l -0.091,0 -0.12469,0.0627 -32.58243,13.14922 c -5.66178,2.26034 -12.34587,-1.08166 -11.13904,-7.8877 0,-0.0314 0,-0.0314 0,-0.0314 l 6.18697,-35.3649 c 2.87618,-16.46315 10.21046,-32.51984 24.10382,-42.45214 l 0.0314,0 c 0.92851,-0.67834 1.85702,-1.30054 2.78553,-1.85702 l 0.0941,-0.0627 c 4.88644,-2.93554 9.68527,0.83786 12.87098,4.42689 l -0.0314,0 c 5.86183,6.70283 12.59588,12.70222 20.24909,17.28854 6.5903,3.94851 18.28269,6.44333 15.11572,16.77887 m 82.39706,-41.12039 c -22.76265,16.27251 -55.70778,21.03386 -81.43107,9.19137 -9.10378,-4.1924 -23.07524,-13.18364 -25.37001,-23.86314 -1.99457,-9.28203 13.50572,-20.06152 20.17413,-23.94753 19.8958,-11.59859 45.36274,-11.32036 66.6154,-3.74846 10.77015,3.83598 22.74391,9.76973 30.47531,18.35459 9.21326,10.22301 -2.32597,18.14827 -10.46376,24.01317 m 58.07438,-15.87852 -0.0314,0 0,0 0.0314,0 0,0 z";
    for (var i = 0; i < (mw * mh) / 20000; i++) {

        var top = NumberGenerator.Generate(0, mh);
        var left = NumberGenerator.Generate(0, mw);
        var color1 = ColorGenerator.GenerateFromPalette(PaletteFactory.Blue).ToRgbFunctionString();

        var bFlake = new fabric.Path(flakePath);

        bFlake.set({
            top: top,
            left: left,
            width: 1000,
            height: 1000,
            fill: color1

        });
        bFlake.setShadow({ color: color1, blur: 100 })

        var s = NumberGenerator.Generate(0, 20) / 100;

        bFlake.scale(s);
        canvas.add(bFlake);
    }

    for (var i = 0; i < (mw * mh) / 15000; i++) {

        var top = NumberGenerator.Generate(0, mh);
        var left = NumberGenerator.Generate(0, mw);
        var color1 = ColorGenerator.GenerateFromPalette(PaletteFactory.White).ToRgbFunctionString();

        var bFlake = new fabric.Path(flakePath);

        bFlake.set({
            top: top,
            left: left,
            width: 1000,
            height: 1000,
            fill: color1

        });
        bFlake.setShadow({ color: color1, blur: 50 })

        var s = NumberGenerator.Generate(0, 20) / 120;

        bFlake.scale(s);
        canvas.add(bFlake);
    }

    canvas.renderAll();

}
